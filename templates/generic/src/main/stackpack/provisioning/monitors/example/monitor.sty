  - _type: "Monitor"
    name: "Test Monitor"
    tags:
      - services
    function: {{ get "urn:stackpack:common:monitor-function:topological-threshold"  }}
    arguments:
      comparator: GTE
      failureState: UNKNOWN
      queries:
        topologyQuery: (label = "stackpack:kubernetes" and type = "service")
        promqlQuery: 'any(present_over_time(podparty_http_requests_count{cluster_name="${tags.cluster-name}", direction="incoming", intra_pod!="true", local_pod_ns="${tags.namespace}", __multi__="${properties.local_pod_metric_selector__+}"}[5m]))'
        aliasTemplate: "Test Monitor Template"
        unit: percent
      threshold: 0
      titleTemplate: "Test Monitor Template"
    identifier: "urn:stackpack:<< .Name >>:shared:monitor:test-monitor"
    description: "{{ include "./monitors/example/description" }}"
    status: "ENABLED"
    intervalSeconds: 10
    remediationHint: ""
    dummy: true
